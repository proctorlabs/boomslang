vars:
  user: "{{ env('USER') }}"

loggers:
  main:
    type: stdout
  file:
    type: file
    path: demo.log

agents:
  "Greet and die immediately":
    logger: main
    type: exec
    policy:
      action: restart
      delay: 1
    command: "echo"
    args: ["Hello {{ user }}!"]

  "Dead in 60 seconds":
    type: script
    shell: /bin/bash
    script: |
      echo "I started"
      sleep 60
      echo "Boom! I died." > /dev/stderr

  "Timer Interval":
    logger: file
    type: timer
    interval: "5000ms"
